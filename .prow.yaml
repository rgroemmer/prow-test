presubmits:
  rgroemmer/prow-test:
  - name: pull-kubernetes-validate-prow-yaml
    always_run: true
    decorate: true
    extra_refs:
    - org: kubernetes
      repo: test-infra
      base_ref: master
    spec:
      containers:
      - image: gcr.io/k8s-prow/checkconfig:v20191205-050b151d0
        command:
        - /app/prow/cmd/checkconfig/app.binary
        args:
        - --config-path=./.prow.yaml
        - --prow-yaml-repo-name=$(REPO_OWNER)/$(REPO_NAME)
  - name: nginx-build-job            # As for periodics.
    decorate: true           # As for periodics.
    always_run: true         # Run for every PR, or only when requested.
    #run_if_changed: "qux/.*" # Regexp, only run on certain changed files.
    skip_report: false        # Whether to skip setting a status on GitHub.
    context: qux-job         # Status context. Defaults to the job name.
    max_concurrency: 10      # As for postsubmits.
    spec: 
      containers: 
      - image: gcr.io/kaniko-project/executor
        args:
        - "--dockerfile=."
        - "--context=dir://."
        - "--destination=nginx-test:$BUILD_ID"
        - "--no-push"
    branches: 
    - "main"
    skip_branches:
    trigger: "(?m)qux test this( please)?" # Regexp, see discussion.
    rerun_command: "qux test this please"  # String, see discussion.
